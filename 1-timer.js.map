{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst calendar = document.querySelector('input[type=\"text\"]');\nconst startBtn = document.querySelector(\"button[data-start]\")\nstartBtn.disabled = true;\ncalendar.addEventListener('input', flatpickr);\n\nlet userSelectedDate = Date.now();\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    dateFormat: 'd-m-Y   H:i',\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0] < Date.now()) {\n            iziToast.show({\n                title: 'Hey',\n                message: 'Please choose a date in the future',\n                position: `topRight`,\n                messageColor: '#fffc3aff',\n                backgroundColor: \"#ec3939\",\n            });\n        } else {\n            userSelectedDate = selectedDates[0];\n            startBtn.disabled = false;\n        }\n    },\n};\n\nflatpickr(calendar, options);\n\n\nlet deltaTime = 0;\nclass Timer {\n\n    constructor({ onTick }) {\n        \n        this.onTick = onTick;\n        this.isActive = false;\n        this.intervalId = null;\n        this.init();\n    }\n\n    init() {\n        const time = this.getTimeComponent(0);\n        this.onTick(time);\n    }\n\n    start() {\n        if(this.isActive) {\n            return;\n        }\n\n        this.isActive = true;\n        const startTime = Date.now();\n        calendar.disabled = true;\n        startBtn.disabled = true;\n        \n        this.intervalId = setInterval(() => {\n            const currentTime = Date.now();\n            deltaTime = userSelectedDate - currentTime;\n            if (deltaTime <= 0) {\n                this.stop();\n                iziToast.show({\n                    title: \"IT's TIME !!!\",\n                    position: \"topLeft\"\n                });\n                return;\n            };\n            const time = this.getTimeComponent(deltaTime);\n            \n            this.onTick(time);\n        }, 1000)\n    }\n\n    stop() {\n        clearInterval(this.intervalId);\n        this.init();\n        this.isActive = false;\n        calendar.disabled = false;\n    }\n\n    getTimeComponent(time) {\n\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n    const day = hour * 24;\n    \n\n  // Remaining days\n  const days = this.addLeadingZero(Math.floor(time / day));\n  // Remaining hours\n  const hours = this.addLeadingZero(Math.floor((time % day) / hour));\n  // Remaining minutes\n  const minutes = this.addLeadingZero(Math.floor(((time % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = this.addLeadingZero(Math.floor((((time % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n    }\n\n    addLeadingZero(value) {\n        return String(value).padStart(2, \"0\");\n    }\n}\n\nconst timer = new Timer({\n    onTick: updateClockface\n});\n\n\nstartBtn.addEventListener(\"click\", timer.start.bind(timer));\n\nfunction updateClockface({ days, hours, minutes, seconds }) {\n    const valueElement = document.querySelectorAll('.value');\n    valueElement.forEach(elem => {\n            if (elem.dataset.days !== undefined) {\n                elem.dataset.days = days;\n                elem.textContent = elem.dataset.days;\n            } else if (elem.dataset.hours !== undefined) {\n                elem.dataset.hours = hours;\n                elem.textContent = elem.dataset.hours;\n            } else if (elem.dataset.minutes !== undefined) {\n                elem.dataset.minutes = minutes;\n                elem.textContent = elem.dataset.minutes;\n            } else if (elem.dataset.seconds !== undefined) {\n                elem.dataset.seconds = seconds;\n                elem.textContent = elem.dataset.seconds;\n            }\n        })\n}\n\n"],"names":["calendar","startBtn","flatpickr","userSelectedDate","options","selectedDates","iziToast","deltaTime","Timer","onTick","time","currentTime","days","hours","minutes","seconds","value","timer","updateClockface","elem"],"mappings":"+IAKA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,SAAW,GACpBD,EAAS,iBAAiB,QAASE,CAAS,EAE5C,IAAIC,EAAmB,KAAK,MAE5B,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,WAAY,cACZ,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,CAAC,EAAI,KAAK,IAAG,EAC3BC,EAAS,KAAK,CACV,MAAO,MACP,QAAS,qCACT,SAAU,WACV,aAAc,YACd,gBAAiB,SACjC,CAAa,GAEDH,EAAmBE,EAAc,CAAC,EAClCJ,EAAS,SAAW,GAE3B,CACL,EAEAC,EAAUF,EAAUI,CAAO,EAG3B,IAAIG,EAAY,EAChB,MAAMC,CAAM,CAER,YAAY,CAAE,OAAAC,GAAU,CAEpB,KAAK,OAASA,EACd,KAAK,SAAW,GAChB,KAAK,WAAa,KAClB,KAAK,KAAI,CACZ,CAED,MAAO,CACH,MAAMC,EAAO,KAAK,iBAAiB,CAAC,EACpC,KAAK,OAAOA,CAAI,CACnB,CAED,OAAQ,CACD,KAAK,WAIR,KAAK,SAAW,GAEhBV,EAAS,SAAW,GACpBC,EAAS,SAAW,GAEpB,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMU,EAAc,KAAK,MAEzB,GADAJ,EAAYJ,EAAmBQ,EAC3BJ,GAAa,EAAG,CAChB,KAAK,KAAI,EACTD,EAAS,KAAK,CACV,MAAO,gBACP,SAAU,SAC9B,CAAiB,EACD,MAEhB,CAAY,MAAMI,EAAO,KAAK,iBAAiBH,CAAS,EAE5C,KAAK,OAAOG,CAAI,CACnB,EAAE,GAAI,EACV,CAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,KAAI,EACT,KAAK,SAAW,GAChBV,EAAS,SAAW,EACvB,CAED,iBAAiBU,EAAM,CAUzB,MAAME,EAAO,KAAK,eAAe,KAAK,MAAMF,EAAO,KAAG,CAAC,EAEjDG,EAAQ,KAAK,eAAe,KAAK,MAAOH,EAAO,MAAO,IAAI,CAAC,EAE3DI,EAAU,KAAK,eAAe,KAAK,MAAQJ,EAAO,MAAO,KAAQ,GAAM,CAAC,EAExEK,EAAU,KAAK,eAAe,KAAK,MAASL,EAAO,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEzF,MAAO,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACnC,CAED,eAAeC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,CAEA,MAAMC,EAAQ,IAAIT,EAAM,CACpB,OAAQU,CACZ,CAAC,EAGDjB,EAAS,iBAAiB,QAASgB,EAAM,MAAM,KAAKA,CAAK,CAAC,EAE1D,SAASC,EAAgB,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACnC,SAAS,iBAAiB,QAAQ,EAC1C,QAAQI,GAAQ,CACjBA,EAAK,QAAQ,OAAS,QACtBA,EAAK,QAAQ,KAAOP,EACpBO,EAAK,YAAcA,EAAK,QAAQ,MACzBA,EAAK,QAAQ,QAAU,QAC9BA,EAAK,QAAQ,MAAQN,EACrBM,EAAK,YAAcA,EAAK,QAAQ,OACzBA,EAAK,QAAQ,UAAY,QAChCA,EAAK,QAAQ,QAAUL,EACvBK,EAAK,YAAcA,EAAK,QAAQ,SACzBA,EAAK,QAAQ,UAAY,SAChCA,EAAK,QAAQ,QAAUJ,EACvBI,EAAK,YAAcA,EAAK,QAAQ,QAEhD,CAAS,CACT"}